---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getAllPosts } from '../../lib/content';

const posts = getAllPosts();
---

<BaseLayout title="Writing" description="Thoughts on startups, cinema, poetry, philosophy, and more.">
  <section>
    <h1 class="text-4xl sm:text-5xl font-serif font-bold mb-10">Writing</h1>

    {posts.length > 0 ? (
      <ul class="space-y-3">
        {posts.map((post) => {
          const date = post.publishedAt
            ? new Date(post.publishedAt).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
              })
            : null;
          return (
            <li class="flex flex-col sm:flex-row sm:items-baseline gap-0.5 sm:gap-3">
              <span class="text-stone-300 dark:text-stone-600 hidden sm:inline select-none">&bull;</span>
              <a href={`/writing/${post.slug}`} class="text-stone-800 dark:text-stone-200 font-medium">
                {post.title}
              </a>
              {date && (
                <span class="text-sm text-stone-400 dark:text-stone-500 shrink-0">
                  {date}
                </span>
              )}
            </li>
          );
        })}
      </ul>
    ) : (
      <p class="text-stone-400 dark:text-stone-500 py-8 text-center">
        Nothing here yet.
      </p>
    )}
  </section>
</BaseLayout>
